<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Add items to the private DICOM dictionary &mdash; pydicom 3.0.0.dev0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/pydicom.css?v=0279de7d" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/pydicom.css?v=0279de7d" />
      <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css?v=61a4c737" />
      <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css?v=f4aeca0c" />
      <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css?v=2082cf3c" />
      <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css?v=1277b6f3" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/documentation_options.js?v=afcbd73c"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=ccdb6887"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Contributing to pydicom" href="../../tutorials/contributing.html" />
    <link rel="prev" title="Working with sequences" href="plot_sequences.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            pydicom
              <img src="../../_static/pydicom_flat_black.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.0.0.dev0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/installation.html">How to install pydicom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../old/getting_started.html">Introduction to pydicom</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../old/pydicom_user_guide.html">pydicom User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../old/ref_guide.html">Reading and writing DICOM files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/index.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/index.html">API Reference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">General examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html#image-processing">Image processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html#input-output">Input-output</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html#metadata-processing">Metadata processing</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../image_processing/index.html">Image processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input_output/index.html">Input-output</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Metadata processing</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="plot_anonymize.html">Anonymize DICOM data</a></li>
<li class="toctree-l3"><a class="reference internal" href="plot_sequences.html">Working with sequences</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Add items to the private DICOM dictionary</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Additional Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/contributing.html">Contributing to pydicom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/index.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes/index.html">Release notes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">pydicom</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">General examples</a></li>
          <li class="breadcrumb-item"><a href="index.html">Metadata processing</a></li>
      <li class="breadcrumb-item active">Add items to the private DICOM dictionary</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="#sphx-glr-download-auto-examples-metadata-processing-plot-add-dict-entries-py"><span class="std std-ref">Go to the end</span></a>
to download the full example code</p>
</div>
<section class="sphx-glr-example-title" id="add-items-to-the-private-dicom-dictionary">
<span id="sphx-glr-auto-examples-metadata-processing-plot-add-dict-entries-py"></span><h1>Add items to the private DICOM dictionary<a class="headerlink" href="#add-items-to-the-private-dicom-dictionary" title="Link to this heading">¶</a></h1>
<p>This examples illustrates how to add private dictionary items to the DICOM
dictionary dynamically. This allows you to read private tags not present in
pydicom’s private dictionary when loading an existing dataset.</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Output for unknown private tags:
(1001,0010) Private Creator                     LO: &#39;ACME 3.1&#39;
(1001,1001) Private tag data                    UN: b&#39;*\x00\x00\x00&#39;
(1001,1002) Private tag data                    UN: b&#39;Hello World &#39;
(1001,1003) Private tag data                    UN: b&#39;1.2.3.4.5\x00&#39;

Output with registered private tags:
(1001,0010) Private Creator                     LO: &#39;ACME 3.1&#39;
(1001,1001) [Test One]                          UL: 42
(1001,1002) [Test Two]                          SH: &#39;Hello World&#39;
(1001,1003) [Test Three]                        UI: 1.2.3.4.5
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># authors : Darcy Mason and pydicom contributors</span>
<span class="c1"># license : MIT</span>

<span class="kn">import</span> <span class="nn">io</span>

<span class="kn">from</span> <span class="nn">pydicom</span> <span class="kn">import</span> <span class="n">dcmread</span>
<span class="kn">from</span> <span class="nn">pydicom.datadict</span> <span class="kn">import</span> <a href="../../reference/generated/pydicom.datadict.add_private_dict_entries.html#pydicom.datadict.add_private_dict_entries" title="pydicom.datadict.add_private_dict_entries" class="sphx-glr-backref-module-pydicom-datadict sphx-glr-backref-type-py-function"><span class="n">add_private_dict_entries</span></a>
<span class="kn">from</span> <span class="nn">pydicom.dataset</span> <span class="kn">import</span> <span class="n">Dataset</span>
<span class="kn">from</span> <span class="nn">pydicom.valuerep</span> <span class="kn">import</span> <span class="n">VR</span>

<span class="nb">print</span><span class="p">(</span><span class="vm">__doc__</span><span class="p">)</span>

<span class="c1"># create a dataset with some private tags for demonstration</span>
<span class="c1"># we create the dataset with Implicit VR Little Endian transfer syntax,</span>
<span class="c1"># so that the VR of the private tags will not be saved</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">()</span>
<span class="n">ds</span><span class="o">.</span><span class="n">is_implicit_VR</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">ds</span><span class="o">.</span><span class="n">is_little_endian</span> <span class="o">=</span> <span class="kc">True</span>

<span class="c1"># add private tags by creating a new private block and add elements to it</span>
<a href="../../reference/generated/pydicom.dataset.PrivateBlock.html#pydicom.dataset.PrivateBlock" title="pydicom.dataset.PrivateBlock" class="sphx-glr-backref-module-pydicom-dataset sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">block</span></a> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">private_block</span><span class="p">(</span><span class="mh">0x1001</span><span class="p">,</span> <span class="s2">&quot;ACME 3.1&quot;</span><span class="p">,</span> <span class="n">create</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a href="../../reference/generated/pydicom.dataset.PrivateBlock.html#pydicom.dataset.PrivateBlock.add_new" title="pydicom.dataset.PrivateBlock.add_new" class="sphx-glr-backref-module-pydicom-dataset sphx-glr-backref-type-py-method"><span class="n">block</span><span class="o">.</span><span class="n">add_new</span></a><span class="p">(</span><span class="mh">0x01</span><span class="p">,</span> <a href="../../reference/generated/pydicom.valuerep.VR.html#pydicom.valuerep.VR" title="pydicom.valuerep.VR" class="sphx-glr-backref-module-pydicom-valuerep sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">VR</span><span class="o">.</span><span class="n">UL</span></a><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
<a href="../../reference/generated/pydicom.dataset.PrivateBlock.html#pydicom.dataset.PrivateBlock.add_new" title="pydicom.dataset.PrivateBlock.add_new" class="sphx-glr-backref-module-pydicom-dataset sphx-glr-backref-type-py-method"><span class="n">block</span><span class="o">.</span><span class="n">add_new</span></a><span class="p">(</span><span class="mh">0x02</span><span class="p">,</span> <a href="../../reference/generated/pydicom.valuerep.VR.html#pydicom.valuerep.VR" title="pydicom.valuerep.VR" class="sphx-glr-backref-module-pydicom-valuerep sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">VR</span><span class="o">.</span><span class="n">SH</span></a><span class="p">,</span> <span class="s2">&quot;Hello World&quot;</span><span class="p">)</span>
<a href="../../reference/generated/pydicom.dataset.PrivateBlock.html#pydicom.dataset.PrivateBlock.add_new" title="pydicom.dataset.PrivateBlock.add_new" class="sphx-glr-backref-module-pydicom-dataset sphx-glr-backref-type-py-method"><span class="n">block</span><span class="o">.</span><span class="n">add_new</span></a><span class="p">(</span><span class="mh">0x03</span><span class="p">,</span> <a href="../../reference/generated/pydicom.valuerep.VR.html#pydicom.valuerep.VR" title="pydicom.valuerep.VR" class="sphx-glr-backref-module-pydicom-valuerep sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">VR</span><span class="o">.</span><span class="n">UI</span></a><span class="p">,</span> <span class="s2">&quot;1.2.3.4.5&quot;</span><span class="p">)</span>

<span class="c1"># write the dataset into a memory file and read it back</span>
<span class="c1"># this simulates reading from a normal DICOM file</span>
<a href="https://docs.python.org/3/library/io.html#io.BytesIO" title="io.BytesIO" class="sphx-glr-backref-module-io sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fp</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/io.html#io.BytesIO" title="io.BytesIO" class="sphx-glr-backref-module-io sphx-glr-backref-type-py-class"><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span></a><span class="p">()</span>
<span class="n">ds</span><span class="o">.</span><span class="n">save_as</span><span class="p">(</span><a href="https://docs.python.org/3/library/io.html#io.BytesIO" title="io.BytesIO" class="sphx-glr-backref-module-io sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fp</span></a><span class="p">)</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">dcmread</span><span class="p">(</span><a href="https://docs.python.org/3/library/io.html#io.BytesIO" title="io.BytesIO" class="sphx-glr-backref-module-io sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fp</span></a><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Output for unknown private tags:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>

<span class="c1"># Creates output:</span>
<span class="c1"># (1001,0010) Private Creator                     LO: &#39;ACME 3.1&#39;</span>
<span class="c1"># (1001,1001) Private tag data                    UN: b&#39;*\x00\x00\x00&#39;</span>
<span class="c1"># (1001,1002) Private tag data                    UN: b&#39;Hello World &#39;</span>
<span class="c1"># (1001,1003) Private tag data                    UN: b&#39;1.2.3.4.5\x00&#39;</span>


<span class="c1"># Add the private tags to the private tag dictionary</span>

<span class="c1"># Define items as (VR, VM, description, is_retired flag)</span>
<span class="c1"># Leave is_retired flag blank.</span>
<a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">new_dict_items</span></a> <span class="o">=</span> <span class="p">{</span>
    <span class="mh">0x10011001</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;UL&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;Test One&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="mh">0x10011002</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;SH&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;Test Two&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="mh">0x10011003</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;UI&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;Test Three&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
<span class="p">}</span>

<span class="c1"># add the entries to the private dictionary, using the correct private creator string</span>
<a href="../../reference/generated/pydicom.datadict.add_private_dict_entries.html#pydicom.datadict.add_private_dict_entries" title="pydicom.datadict.add_private_dict_entries" class="sphx-glr-backref-module-pydicom-datadict sphx-glr-backref-type-py-function"><span class="n">add_private_dict_entries</span></a><span class="p">(</span><span class="n">private_creator</span><span class="o">=</span><span class="s2">&quot;ACME 3.1&quot;</span><span class="p">,</span> <span class="n">new_entries_dict</span><span class="o">=</span><a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">new_dict_items</span></a><span class="p">)</span>

<span class="c1"># re-read the dataset for the new dictionary entries to be applied</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">dcmread</span><span class="p">(</span><a href="https://docs.python.org/3/library/io.html#io.BytesIO" title="io.BytesIO" class="sphx-glr-backref-module-io sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fp</span></a><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Output with registered private tags:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>

<span class="c1"># Creates output:</span>
<span class="c1"># (1001,0010) Private Creator                     LO: &#39;ACME 3.1&#39;</span>
<span class="c1"># (1001,1001) [Test One]                          UL: 42</span>
<span class="c1"># (1001,1002) [Test Two]                          SH: &#39;Hello World&#39;</span>
<span class="c1"># (1001,1003) [Test Three]                        UI: 1.2.3.4.5</span>
</pre></div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> (0 minutes 0.003 seconds)</p>
<div class="sphx-glr-footer sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-examples-metadata-processing-plot-add-dict-entries-py">
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/54be3151aaa6e43d8757c4eaeb691675/plot_add_dict_entries.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">plot_add_dict_entries.ipynb</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/b09c4a9ac1947f91877d5cbf389a2b2e/plot_add_dict_entries.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">plot_add_dict_entries.py</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="plot_sequences.html" class="btn btn-neutral float-left" title="Working with sequences" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../tutorials/contributing.html" class="btn btn-neutral float-right" title="Contributing to pydicom" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2008-2023, Darcy Mason and pydicom contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>